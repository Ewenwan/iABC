<html>

<header>
  <script src="./libs/axios/axios.min.js"></script>
</header>

<body>
  <p>
    爱上古诗复习题库
  </p>
  <input type="button" value="下一个" onclick=setHtml()>

  <p>
    题目：
    <div id="topic"></div>
  </p>
  <p>
    答案：
    <div id="answer"></div>
  </p>
  <p>
    全诗：
    <div id="poem"></div>
  </p>

  <script>
    let poemArr = Array();
    const num = 100; // 一次获取题目的数量

    function getPoems() {
      var url = `/get_topics/${num}`;

      // 一次抽取100题
      axios.get(url).then(function (response) {
        poemArr = response.data;
      });

    }

    let index = 0;
    getPoems();  // 初始化数据

    function setHtml() {
      console.log(index);
      if (index === num) {
        getPoems();
        index = 0;
      }
      const jsonObject = poemArr[index++];
      document.getElementById("topic").innerHTML = jsonObject.topic;
      document.getElementById("answer").innerHTML = jsonObject.answer;
      document.getElementById("poem").innerHTML = JSON.stringify(jsonObject.poem);
    }
  </script>

</body>

</html>